// Debug while copy loop
fn str_len(s) {
    let i = 0
    while getbyte(s, i) > 0 {
        i = i + 1
    }
    return i
}

fn io_print(s) {
    let len = str_len(s)
    let h = getstd(-11)
    write(h, s, len)
    return 0
}

fn main() {
    let code = alloc(4)
    setbyte(code, 0, 65)  // A
    setbyte(code, 1, 66)  // B
    setbyte(code, 2, 0)
    
    let buf = alloc(4)
    
    // Copy in while loop
    let len = 2
    let k = 0
    while k < len {
        let ch = getbyte(code, k)
        setbyte(buf, k, ch)
        k = k + 1
    }
    setbyte(buf, len, 0)
    
    io_print(buf)
    
    return 0
}
