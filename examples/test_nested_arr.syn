// Test nested: array write inside if inside while

let g_arr = 0

fn test() {
    let i = 0
    let c = 0
    
    puts("Testing if inside while with global array")
    puts("g_arr address:")
    print(g_arr)
    
    i = 0
    while (i < 3) {
        c = i + 100
        puts("c =")
        print(c)
        
        if (c == 100) {
            puts("Writing 42 at index 0")
            g_arr[0] = 42
            puts("Wrote! Read:")
            print(g_arr[0])
        }
        
        if (c == 101) {
            puts("Writing 43 at index 1")
            g_arr[1] = 43
            puts("Wrote! Read:")
            print(g_arr[1])
        }
        
        i = i + 1
    }
    
    puts("Final check:")
    print(g_arr[0])
    print(g_arr[1])
    
    return 0
}

fn main() {
    g_arr = alloc(256)
    puts("Allocated g_arr:")
    print(g_arr)
    test()
    return 0
}
